W;
END RETURN NE   STAMP;
RRENT_TIME CUpdated_at = NEW.uN
   S $$
BEGIS TRIGGER A
RETURNolumn()_at_catedN update_updIOEPLACE FUNCT REATE OR
CRsqlps
```timestamate -upd## Autoers

##abase Trigg### Datd);
```

_i_stars(user ON projectars_user_idect_stDEX idx_proj;
CREATE IN(project_id)t_starsprojec_id ON ectstars_projidx_project_X TE INDEs
CREAIndexe
);

--  user_id)_id,(project
    UNIQUEojectuser per pre star per re on -- Ensu,
    
   T_TIMESTAMPCURRENLT  DEFAUIME ZONEAMP WITH TMEST_at TI
    createdSCADE,DELETE CAON users(id) CES REFEREN5) NOT NULL RCHAR(25user_id VAADE,
    E CASCET) ON DELrojects(idREFERENCES p NULL  UUID NOTt_id  projec),
  id(ndom_uu_raLT genDEFAU KEY D PRIMARY
    id UUIt_stars (E projecE TABLATql
CREe
```sSTARS TablCT_PROJE7. 

#### 
```tags);SING GIN(rojects Utags ON pcts_X idx_projeREATE INDEge);
Cnguaojects(lapr ON anguagerojects_l idx_pEXATE INDCRE TRUE;
d =rove is_appd) WHEREapproveis_jects(oved ON propprs_a_projectidx INDEX UE;
CREATETRatured =  WHERE is_feed)is_featurON projects(ts_featured  idx_projecEX INDSC);
CREATEDEount stars_cts(ON projecs_count ts_staridx_projecE INDEX CREATt DESC);
eated_aojects(cred_at ON prat_cre_projectsEX idxIND;
CREATE ser_id)rojects(uid ON p_user_idx_projectsDEX  INs
CREATExe

-- Inde
);')b\.com/.+/githus:/* '^http_url ~K (githubrmat CHEC_url_foithubts_gojecT prCONSTRAIN
    = 0), >ount AND forks_c>= 0t s_counECK (starve CHti_posintsts_couprojecAINT NSTR,
    CO55)e) <= 2titlar_length(h CHECK (chitle_lengtcts_tojeINT prCONSTRAraints
    nst
    -- Co,
    _TIMESTAMPENTEFAULT CURR ZONE DMEITH TIIMESTAMP Wupdated_at T,
    ESTAMP_TIMLT CURRENT ZONE DEFAUWITH TIMEt TIMESTAMP ated_are c
    approval  -- AdminLSE,     T FAEFAULAN Ded BOOLEpprov
    is_ajecttured proFea-       -ALSE, AN DEFAULT FOLEBOured    is_feat
 ached)rks (cfoGitHub        --   T 0,  EFAULNTEGER Dt Iforks_couned)
    cachb stars (GitHu     --       EFAULT 0,ER DTEGt INcouns_taruage
    sy lang Primar--                AR(100),   RCH language VA tags
   gyechnolo     -- T        T '{}',   AULTEXT[] DEFtags L
    demo UR  -- Live              R(500),    url VARCHA   live_
  URLpository reitHub- G       -) NOT NULL, ARCHAR(500 Vthub_url   giD
  Iry publicdina    -- Clou      5),  d VARCHAR(25lic_iimage_pub   hot
 t screens  -- Projec                    l TEXT,       image_uription
 scr Project de          --ULL,      TEXT NOT Noncripti destle
   - Project ti       -  ,    55) NOT NULL VARCHAR(2
    titleASCADE,ETE Cd) ON DELCES users(iNULL REFEREN55) NOT AR(2id VARCH
    user_om_uuid(),T gen_rand DEFAULMARY KEYd UUID PRI  i
  cts (E projeEATE TABLql
CRTable
```sTS  6. PROJEC``

####_id);
`es(usernt_likON commekes_user_id x_comment_liNDEX id Id);
CREATEent_it_likes(commenN commd Omment_ient_likes_co_commdxDEX iATE IN
CREndexes

-- Id)
);, user_i(comment_idUEUNIQent
    commer er user pone like pre nsu- E   -  
   AMP,
T_TIMESTLT CURRENONE DEFAUTH TIME ZMESTAMP WI TI  created_atCADE,
   DELETE CASrs(id) ONNCES useFERE RE) NOT NULLR(255HARCd VA  user_iDE,
  SCATE CA(id) ON DELEtsommenENCES post_cNULL REFERT  UUID NO comment_id(),
   ndom_uuidAULT gen_raDEFRIMARY KEY  PUID  id Us (
  kemment_liE coEATE TABL``sql
CR Table
`OMMENT_LIKES## 5. C
##C);
```
ated_at ASts(cre_commenON posteated_at _comments_crpostdx_E INDEX id);
CREATrent_ipants(ost_commeid ON pparent_nts_x_post_commeidX EATE INDE_id);
CRts(userenost_commN p Oer_idts_usost_commen INDEX idx_pATECRE(post_id);
t_commentst_id ON poss_pospost_commentidx_ATE INDEX 
CRE
-- Indexes= 0)
);
ikes_count >CHECK (litive likes_posnts_TRAINT commeCONS,
    ent) <= 500)ontength(cHECK (char_lent_length Cents_contRAINT commNST
    COaintsConstr-   -
  ,
    STAMPENT_TIMEDEFAULT CURRME ZONE  TISTAMP WITH_at TIMEpdated
    uMP,ESTAURRENT_TIME DEFAULT C TIME ZONTAMP WITHt TIMESeated_alag
    cr- Edit f         -E,LSFAULT FAOLEAN DE BOed_editkes
    isli-- Comment ,           R DEFAULT 0INTEGEt   likes_counrs)
  500 chaontent (max Comment c   --                T NULL,   TEXT NO    contents
entsted comm ne, -- ForCADEDELETE CASN ts(id) Oenmm post_coFERENCES_id UUID RErent
    paTE CASCADE, ON DELEs(id)RENCES userOT NULL REFE N255)R(ARCHAuser_id VE,
    TE CASCADN DELEsts(id) OpoERENCES NOT NULL REFUID ost_id U   pd(),
 m_uuirandon_Y DEFAULT geD PRIMARY KE    id UUIts (
menLE post_comREATE TABl
C
```sqableT_COMMENTS T# 4. POS

###ESC);
```t Ds(created_apost_likeed_at ON _creatost_likes INDEX idx_pREATEser_id);
Cst_likes(uer_id ON polikes_usidx_post_INDEX TE EA;
CRid)likes(post_st_id ON po_post_st_likespoINDEX idx_s
CREATE -- Indexe
);

)_id, user_idIQUE(post
    UNr per postr uselike pee one Ensur   -- 
 
    T_TIMESTAMP,CURRENONE DEFAULT E ZTH TIMSTAMP WI TIMEd_at
    createCASCADE,LETE ) ON DECES users(idRENOT NULL REFE255) NCHAR(ser_id VAR   u CASCADE,
 ON DELETE posts(id) L REFERENCES NOT NULd UUIDpost_i,
    ()random_uuidLT gen_ KEY DEFAUIMARYID PR id UU
    (E post_likesE TABL`sql
CREAT
``IKES Table. POST_L``

#### 3 = TRUE;
`is_pinnedned) WHERE sts(is_pined ON po_pinn idx_posts INDEX;
CREATEived = FALSE is_archERErchived) WHs(is_ave ON postactiposts_E INDEX idx_C);
CREATount DESlikes_ct ON posts(counposts_likes_X idx_INDETE DESC);
CREAat created_posts(_at ON sts_created idx_poREATE INDEX;
C_id)userts(r_id ON possedx_posts_uEX iATE INDIndexes
CRE- )
);

- >= 0
    nt  shares_couAND 
      _count >= 0     comments
     AND count >= 0s_  like  ECK (
    positive CHsts_counts_T poONSTRAIN C 2000),
   ontent) <=ngth(car_lechK (_length CHEC_contentTRAINT postsONS  Cts
  Constrain-  -
   TAMP,
    _TIMESENT CURRLT DEFAUZONETIME AMP WITH MESTated_at TIupdMP,
    STAMEENT_TIFAULT CURRE DETH TIME ZONSTAMP WITIME_at ed  createte flag
  t delSof    --  FALSE,   N DEFAULTved BOOLEA_archists
    isponed n: pin-- Admi         FALSE,EFAULT  BOOLEAN Dinned_punt
    ises couture: shar     -- F,     DEFAULT 0GER count INTEares_shount
    mments ced co   -- CachLT 0,      DEFAUNTEGERount Ients_c   commkes count
 Cached li    -- LT 0,       EFAU DTEGER_count INkes
    lieletionID for dpublic ry  -- Cloudina       55),    CHAR(2c_id VAR image_publi  mage URL
 ry iina    -- Cloud              ,        XTage_url TE im
    chars)max 2000t ( contenPost   --             T NULL,     EXT NOt TtenDE,
    conE CASCAON DELETers(id) usERENCES  NULL REFAR(255) NOT_id VARCH
    userm_uuid(),_randogenLT EFAUMARY KEY DUID PRI
    id Uosts (TABLE p
CREATE ``sqlS Table
` 2. POST``

####SC);
`reated_at DErs(cat ON usecreated_rs_dx_useX iE INDEAT
CRE(username);ersON use s_usernamerDEX idx_usEATE IN
CRs(email); ON usersers_emailidx_uTE INDEX REA Indexes
C
);

--NT_TIMESTAMPULT CURRE ZONE DEFAWITH TIMEP  TIMESTAMed_atpdat  uP,
  TIMESTAMT_AULT CURREN ZONE DEFP WITH TIME TIMESTAMcreated_at
    tatus- Account s -          UE,T TRAN DEFAULe BOOLE    is_activs
on statuificati      -- VerLSE,  ULT FALEAN DEFAfied BOOri
    is_veme userna LinkedIn          --00), RCHAR(1_username VAedinnkname
    li userTwitter --           R(100), HAername VARC twitter_usame
   rnseGitHub u       -- (100),      VARCHAR_username hub
    gitwebsite Personal     --          5),       RCHAR(25 website VAtion
   er loca    -- Us              R(100),  HAation VARChy
    locer biograp- Us         -                     TEXT,    ioClerk
    bURL from image rofile  -- P                ,          e_url TEXTme
    imagined full na-- Comb                HAR(200),   l_name VARCul
    frke from Cleast nam -- L            ,      RCHAR(100)ame VA   last_nrom Clerk
  name f   -- First               AR(100),RCHirst_name VAname
    fnique user U      --UE,       UNIQRCHAR(100) ame VA   usern Clerk
 ail from- User emLL,       -QUE NOT NU255) UNIRCHAR(email VAID
    Clerk user          -- Y,      PRIMARY KEHAR(255)VARC
    id  users (ABLEl
CREATE T`sqable
``. USERS T

#### 1masble Sched Taaile

### Det────┘
```────────   └─────               │
       t    d_a    │ create                     │
  user_id (FK)    │                  FK) │
  d (oject_i    │ pr            │
        PK)            │ id (                   ─┤
──────────────       ├──             
      │OJECT_STARS PR        │             ─────┘
  ────────────  └──────┐  ──────────       ┌─           
     at      │eated_cr    │                                           (FK)    │
ser_id   │ u────────┘  ─────      └────            
     ) │_id (FKmment  │    │ co    _ateated  │ cr               │
      K)         d (P│    │ iatured      is_fe         │        ┤
      ─────────────  ├────ount     │     │ stars_c                 
   KES   │ENT_LI │ COMM   │   anguage          │ l               ───┐
   ──────────────  │    ┌    ags           │ t               
     │      live_url  │                   
   ────┘──────── └─────    │   rl  │ github_u                   
    at      │dated_ │ upn     │   ioscriptde  │                   
      │ted_at    │    │ crea     title          │            │
       unt     likes_co│       │ FK)  ( user_id         │                       │
ntnte   │ co  │ K)          │ id (P──────────┘ ──
└─────d (FK)  │parent_i──┤    │ ─────────── ├────t      │   updated_a  │
│ (FK)   user_id      │    │OJECTS PR   │    │   ed_at     │
│ creat  _id (FK) post─────┐    │──────────   │    ┌──fied  is_veri  │
│      d (PK)   i   │                         │rname github_use─────┤
│──────────   ├─────┘ ────────── │    └────     location   │
│   T_COMMENTS │    │ POSat     d_  │ update  │       bio       ─┐
│────────────│    ┌────     at created_    │        │e_urlimag │
│ unt omments_co│ c    │  ll_name      fu
│────┘─────────────   └count     │     │ likes_   │st_name         │
│ laed_at at │ cre      │   │ image_url   e      │  │ first_nam  │
  user_id (FK)   │    │ tent        │    │ conme      
│ userna(FK)    │st_id    │   └│ po (FK) └│ user_id  │   ail             │
│ em    PK)  (  │◄──┐│ idPK)       ◄──┐│ id ( │        id (PK) ──┤
│────────────  ├──────────┤  ─────────────┤    ├─────────   │
├─────OST_LIKES    │    │  PPOSTS      │     │   ERS       
│     US──────────┐    ┌──────────┐───────  ┌───────────────┐  
┌─────────`am

``hip Diagronsity RelatiEntma

### atabase Sche
## 🗄️ D

---
o Redis)ded ten(can be extmemory **: In- **Caching
-ervice)xternal Srk (Ele C**:nticationtheN
- **Auoudinary CDCl**: le Storage- **Fion pooling
onnectiith cgreSQL w*: Postatabase***Dcture
- nfrastrug

#### ImitinS, Rate LiHelmet, CORcurity**: 
- **Ses-validator: expresidation**aly
- **Vdinarter + Clouload**: Mul UpFile
- **nd SDKkelerk Bacation**: CAuthentic**L 14+
- : PostgreSQDatabase** **ES6+)
-cript (age**: JavaSangu
- **L Express.jsk**:Framewor **de.js 18+
-**: Nome*RuntiBackend
- *)

#### ner (Toast*: Sonions* **Notificatal State
-+ Locooks React Ht**: te Managemen **Staxios
-nt**: AClieTTP rk
- **HCleication**:  **Authent
- Components+ Customadix UI ts**: RI ComponenSS
- **Und Cwi Tailtyling**:**SScript
- penguage**: Ty
- **Larp Route5 with Ap*: Next.js 1ramework*d
- **F### Frontenack

# St Technology
```

###───┘────└──────────    ───────────┘──────    └──┘──────────  │
└─────/Cache)ogs│   (L │    )     │   (Images)    │    nal (Exter  │
│  stem │   File Sy│    ry      Cloudina    │    │ Clerk Auth────┐
│   ───────────   ┌───────┐ ─────────── ┌────────┐   ─────
┌─────    ▼                         ▼                     ▼   
         │                   │                         │─────┘
    ───────────  └─────┘  ───────────└──  ────┘  ───────────2    │
└──43  Port: 5    │ 00    │ 50rt: Po      │    │rt: 3000Po)  │
│   eSQL   (Postgr►│.js)  │◄──ss(Expre   │◄──►│    (Next.js)      │
│  se  taba │   Da      │  end      │   Backtend      │onFr
│   ──────────┐┌───────  ────┐  ───────────  ┌──┐  ─────────────────`
┌verview
``

### Orchitecture System A🏗️

## 

---leshooting)ng](#troubotiTroublesho
10. [ogging)ng--lmonitori Logging](#itoring &de)
9. [Monent-guiymide](#deploGument loy [Dep
8.ion)ementatecurity-impl#s](tationity Implemenecur
7. [Schitecture)ntend-arecture](#frochitd Ar
6. [Frontend-system)loa#file-uptem](pload Sysle U
5. [Fiflow)on-ticati(#authenn Flow]ticatio [Authentation)
4.cumenpi-dontation](#aumeI Doc3. [APschema)
atabase-ma](#dtabase ScheDa
2. [itecture)stem-arch#syture](echit[System Arcs

1. ontentable of C# 📋 T

#ocumentationnical Dity - TechEK CommunENGE# OP